<div class="container mt-5">
  <div class="row">
    <div class="col-md-6">
      <button class="btn btn-primary" routerLink="/employee/add">
        Add Employee
      </button>
    </div>
    <div class="col-md-6 d-flex">
      <input
        type="text"
        class="input-field"
        placeholder="Search"
        [(ngModel)]="EmployeeFilterObj.filterQuery"
      />
      <i class="mdi mdi-window-close cancel-icon" (click)="clearSearch()"></i>
      <button
        class="btn search-btn btn-primary ms-2 btn-sm"
        (click)="onSearch()"
      >
        SEARCH
      </button>
      <div class="ms-4 fw-medium fs-5">
        <label for="filterField">Filter by:</label>
        <select id="filterField" [(ngModel)]="selectedFilterField">
          <option *ngFor="let field of filterFields" [value]="field">
            {{ field }}
          </option>
        </select>
      </div>
    </div>
  </div>
</div>

<div class="container mt-5">
  <div class="row">
    <div class="col-12">
      <table class="table">
        <thead class="bg-primary text-white fw-semibold">
          <tr>
            <th class="col-md-1 text-center">ID</th>
            <th class="col-md-2 text-center" (click)="sortDep('name')">
              NAME <i class="mdi mdi-menu-up hover-menu"></i>
            </th>
            <th
              class="col-md-1 text-center"
              (click)="sortDep('departmentName')"
            >
              DEPARTMENT <i class="mdi mdi-menu-up hover-menu"></i>
            </th>
            <th class="col-md-2 text-center" (click)="sortDep('createdOn')">
              CREATED ON <i class="mdi mdi-menu-up hover-menu"></i>
            </th>
            <th class="col-md-1 text-center" (click)="sortDep('createdBy')">
              CREATED BY <i class="mdi mdi-menu-up hover-menu"></i>
            </th>
            <th class="col-md-1 text-center" (click)="sortDep('salary')">
              SALARY <i class="mdi mdi-menu-up hover-menu"></i>
            </th>
            <th class="col-md-1 text-center" (click)="sortDep('role')">
              ROLE <i class="mdi mdi-menu-up hover-menu"></i>
            </th>
            <th class="col-md-1 text-center" (click)="sortDep('adminName')">
              MANAGER <i class="mdi mdi-menu-up hover-menu"></i>
            </th>
            <th class="col-md-2 text-center">ACTION</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of employeeList; let i = index">
            <td class="text-center">{{ getGlobalIndex(i) }}</td>
            <td class="text-start ps-2">{{ item.name }}</td>
            <td class="text-start ps-2">{{ item.departmentName }}</td>
            <td class="text-start ps-2">{{ item.createdOn }}</td>
            <td class="text-start ps-2">{{ item.createdBy }}</td>
            <td class="text-start ps-2">{{ item.salary }}</td>
            <td class="text-start ps-2">  
              <div *ngIf="item.role === 0" >Employee</div> 
              <div *ngIf="item.role === 1" >Admin</div>
              <div *ngIf="item.role === 2" > SuperAdmin</div> 
            </td>
            <td class="text-start ps-2">{{ item.adminName }}</td>
            <td class="text-center">
              <button class="btn btn-danger btn-sm" (click)="delete(item.id)">
                DELETE
              </button>
              <button
                class="btn btn-primary btn-sm ms-2"
                [routerLink]="['/employee/edit', item.id]"
              >
                UPDATE
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="container mt-5">
  <div class="row">
    <div class="col-4 mb-5">
      <mat-paginator
        class="pagination shadow"
        [length]="totalEntriesCount"
        [pageSize]="EmployeeFilterObj.pageSize"
        [pageSizeOptions]="[5, 10, 20, 50]"
        aria-label="Select page"
        (page)="onPageEvent($event)"
      >
      </mat-paginator>
    </div>
    <div class="col-md-6 ms-4 d-flex">
      <!-- {{getMaxPage()}} -->
      <input
        type="number"
        [min]="1"
        [max]="maxPage"
        [(ngModel)]="pageInput"
        placeholder="page"
        class="form-control go-input text-center me-2"
      />
      <button class="btn btn-primary go-btn" (click)="goToPage()">GO</button>
      <div *ngIf="errorMsg" class="error-message text-danger">
        {{ errorMsg }}
      </div>
    </div>
  </div>
</div>
